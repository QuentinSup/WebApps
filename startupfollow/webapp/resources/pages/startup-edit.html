<link rel="stylesheet" href="{$host}assets/css/simpleupload.css" type="text/css" media="all" />
<!-- Header -->
<header id="header" class="navigation-bar-header light hidden-xs">
	<div class="container">
		<nav class="navigation">
			<div class="navigation-txt hidden-xs" data-toggle="dropdown">StartupFollow</div>
			<div class="navigation-txt visible-xs" data-toggle="dropdown">Home</div>
			<button class="navigation-toggle visible-xs" type="button" data-toggle="dropdown">
				<span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span>
			</button>
			<ul class="navigation-bar navigation-bar-left">

			</ul>
		</nav>
	</div>
</header>
<!-- End Header -->
<section style="font-size: .9em; padding-top: 2em;" class="bg-gray">
	<div class="container">
		<div class="row">
			<div class="col-sm-3">
				<ul class="list">
					<li data-bind="click: function() { showSection(1) }, css: { 'strong': index() == 1 }">Votre Startup</li>
					<li data-bind="click: function() { showSection(2) }, css: { 'strong': index() == 2 }">Logo &amp; réseaux sociaux</li>
					<li data-bind="click: function() { showSection(3) }, css: { 'strong': index() == 3 }">Votre équipe</li>
					<li data-bind="click: function() { showSection(4) }, css: { 'strong': index() == 4 }">Votre histoire</li>
					<li data-bind="click: function() { showSection(5) }, css: { 'strong': index() == 5 }">Les événements</li>
				</ul>
			</div>
			<div class="col-sm-9">
				<div id="sections" class="slider" data-slider-speed="0">
					<ul>
						<li class="content">
							<section>
								<div class="h8">Votre Startup</div>
								<!-- ko with: form -->
								<form data-role="form">
									<div class="form-group row has-feedback">
										<label for="FormInputName" class="col-sm-12 control-label">Nom et phrase d'accroche</label>
										<div class="col-sm-4">
											<input id="FormInputName" type="text" value="" class="form-control" data-bind="value: name, valueUpdate: 'input'"
												placeholder="nom du projet..." required />
											<!-- ko if: !nameExists() -->
											<span class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>
											<!-- /ko -->
										</div>
									</div>
									<div class="form-group row">
										<div class="col-sm-8">
											<input id="FormInputPunchLine" type="text" class="form-control" value="" data-bind="value: punchLine, valueUpdate: 'input'"
												placeholder="Ex. : In tartiflette we trust" />
										</div>
									</div>

									<div class="form-group row">
										<div class="col-sm-12">
											<label for="FormInputEmail" class="control-label"> Adresse de contact </label>
											<p class="help-block">Cette adresse sera privilégiée pour prendre contact avec vous et votre équipe. Vous recevrez une notification afin de donner
												régulièrement des nouvelles à votre communauté</p>
										</div>
										<div class="col-sm-8">
											<input id="FormInputEmail" type="text" class="form-control" value="" data-bind="value: email, valueUpdate: 'input'"
												placeholder="email de contact" required />
										</div>
									</div>
									<div class="form-submit">
										<button data-bind="click: function() { submit(); }" class="btn btn-default">Enregistrer</button>
									</div>
								</form>
								<!-- /ko -->
							</section>
						</li>
						<li class="content">
							<section>
								<div class="h8">Votre logo</div>
								<p>Votre logo et vos liens vers vos réseaux sociaux permettront à vos fans de vous suivre plus facilement et d'accroître votre communauté.</p>
								<!-- ko with: form -->
								<form class="form-register" data-role="form">
									<label>Votre image</label>
									
									<div class="form-group row">
										<div class="col-sm-12 text-center">
											<div id="fileuploader">
												<img id="fileuploader-preview" data-bind="attr: { 'src': $data.image }" />
												<div class="upload-bar">
													<div id="fileupload-pbar"></div>
												</div>
											</div>
											<p class="help-block">Fichiers autorisés : .png, .jpg. Max: 3Mb</p>
										</div>
									</div>
									<label>Liens</label>
									<div class="form-group row-fluid">
										<div class="input-group col-sm-3">
											<span class="input-group-addon"><span class="fa fa-twitter"></span></span> <input type="text" class="form-control" value=""
												data-bind="value: twitter, valueUpdate: 'input'" placeholder="@" />
										</div>
									</div>
									<div class="form-group row-fluid">
										<div class="input-group col-sm-6">
											<span class="input-group-addon"><span class="fa fa-link"></span></span> <input type="text" class="form-control" value=""
												data-bind="value: website, valueUpdate: 'input'" placeholder="http://" />
										</div>
									</div>
									<div class="form-group row-fluid">
										<div class="input-group col-sm-6">
											<span class="input-group-addon"><span class="fa fa-facebook"></span></span> <input type="text" class="form-control" value=""
												data-bind="value: facebook, valueUpdate: 'input'" placeholder="" />
										</div>
									</div>
									<div class="form-submit">
										<button data-bind="click: function() { submit(); }" class="btn btn-default">Enregistrer</button>
									</div>
								</form>
								<!-- /ko -->
							</section>
						</li>
						<li class="content">
							<section>
								<div class="h8">Votre équipe</div>
								<p></p>
								<!-- ko with: form -->
								<form data-role="form" class="form">
									<label>Votre équipe</label>
									<p>Invitez votre équipe à vous rejoindre !</p>
									<!-- ko foreach: members() -->
									<!-- ko ifnot: deleted() -->
									<div class="row">
										<div class="col-sm-1">
											<button class="btn" data-bind="click: function() { $parent.removeMember($index()); }">-</button>
										</div>
										<!-- ko if: !!$data.user() -->
										<div class="col-sm-2 text-center">
											<div class="img-wrapper">
												<img data-bind="attr: { 'src': $data.user().image || host + 'assets/img/avatars/team-avatar.png' }" class="img-responsive img-circle small" alt="avatar" />
											</div>
										</div>
										<div class="col-sm-4">
											<label>
											<span data-bind="text: $data.user().name"></span>
											<br />
											<!-- ko if: joined() -->
											<strong>accepté</strong>
											<!-- /ko -->
											<!-- ko ifnot: joined() -->
											<!-- ko if: !$data.invitationSentAt() -->
											<strong>nouveau</strong>
											<!-- /ko -->
											<!-- ko if: $data.invitationSentAt() -->
											<strong data-bind="attr: { 'title': 'Invitation envoyée le ' + $data.invitationSentAt() }">invitation en attente</strong>
											<!-- /ko -->
											<!-- /ko -->
											</label>
										</div>
										<!-- /ko -->
										<!-- ko ifnot: !!$data.user() -->
										<div class="col-sm-2 text-center">
											<div class="img-wrapper">
												<img src="{$host}assets/img/avatars/team-avatar.png" class="img-responsive img-circle small" alt="avatar" />
											</div>
										</div>
										<div class="col-sm-4">
											<!-- ko if: !$data.invitationSentAt() -->
											<input type="text" class="form-control" value="" data-bind="value: email, valueUpdate: 'input', disable: !!$data.uid(), attr: { 'title': $data.invitationSentAt()?'Invitation envoyée le ' + $data.invitationSentAt():'' }" placeholder="Email" required />
											<!-- /ko -->
											<!-- ko if: $data.invitationSentAt() -->
											<label>
											<span data-bind="text: $data.email()"></span>
											<br />
											<strong>invitation en attente</strong>
											</label>
											<!-- /ko -->
										</div>
										<!-- /ko -->
										<div class="col-sm-3">
											<div class="form-group">
												<input type="text" class="form-control" value="" data-bind="value: role, valueUpdate: 'input'" placeholder="Rôle" />
											</div>
										</div>
									</div>
									<!-- /ko -->
									<!-- /ko -->
									<div class="form-group">
										<button data-bind="click: function() { addMember(); }" class="btn col-sm-1">+</button>
									</div>
									<div class="form-submit">
										<button data-bind="click: function() { submit(); }" class="btn btn-default">Enregistrer</button>
									</div>
								</form>
								<!-- /ko -->
							</section>
						</li>
						<li class="content">
							<section>
								<div class="h8">Votre histoire</div>
								<button data-bind="click: function() { newStory(); }" class="btn white">Ajouter</button>
								<div id="stories" class="slider">
									<ul>
										<li>
											<label>Vos dernières nouvelles</label>
											<ul class="list">
												<!-- ko foreach: stories -->
												<li data-bind="click: function() { $root.editStory($data.uid) }">
													<span class="h8" data-bind="text: $data.shortLine"></span>
													<span data-bind="text: $data.date"></span>
												</li>
												<!-- /ko -->
											</ul>
										</li>
										<li class="content">
											<!-- ko with: storyform -->
											<form data-role="form">
												<label></label>
												<div class="row">
													<div class="form-group col-sm-12">
														<input type="text" class="form-control h7" value="" data-bind="value: shortLine, valueUpdate: 'input'"
															placeholder="Ex. : Startup Weekend nous voilà !" required />
													</div>
												</div>
												<div class="row">
													<div class="form-group col-sm-12">
														<div id="form-text" data-bind="html: text" class="tinymce" title="Donnez à vos fans l'envie de vous suivre !"
															placeholder="Donnez de vos nouvelles à vos fans !"></div>
													</div>
												</div>
												<div class="form-submit">
													<button data-bind="click: function() { cancel(); }" class="btn blank">Annuler</button>
													<button data-bind="click: function() { submit(); }" class="btn btn-default">Enregistrer</button>
												</div>
											</form> <!-- /ko -->
										</li>
									</ul>
								</div>
							</section>
						</li>
						<li class="content">
							<section>
								<div class="h8">Historique</div>
								<!-- ko foreach: events() -->
								<ul>
									<!-- ko if: $data.type == 1 -->
									<li>
									L'utilisateur #<strong data-bind="text: $data.user_uid"></strong> <strong data-bind="text: $data.user.name"></strong> a créé le compte
									
									</li>
									<!-- /ko -->
								</ul>
								<!-- /ko -->
							</section>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
</section>
<!-- End Hero Section -->

<script src="{$host}assets/js/tinymce/tinymce.min.js"></script>
<script src="{$host}assets/js/jquery.simpleupload.js"></script>
<script type="text/javascript" src="{$host}resources/pages/js/startupedit.js"></script>

<script type="text/javascript">

	model.load("{$ref}");
	
	jQuery(document).ready(function($) {
		$('.slider').each(function() {
			var $this = $(this);
			$this.formslider({ speed: ($this.attr('data-slider-speed') || 500) * 1 });
		});
		
		$("#fileuploader").simpleupload({
			url: '{$host}api/image',
			acceptFiles:"image/*",
			previewImage: '#fileuploader-preview',
			authorizedExtensions:"png,jpg,jpeg",
			maxFileSize:3*1024*1024,
			onUploadProgress: function(file, e) {
				
				var percent = Math.round(e.loaded / e.total * 100 * 10) / 10; // round to 1 dec
				$('#fileupload-pbar').width(percent + '%');
				
			},
			onUploadComplete: function(file, status, data) {
				if(status == 200) {
					var json = JSON.parse(data);
					model.form.image(json.location);
				}
			}
		});
		
	});
	
</script>